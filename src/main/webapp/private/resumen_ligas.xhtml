<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>#{msgs.lig_title}</title>
	<h:outputStylesheet name="graphics/css/style.css" />
</h:head>
<h:body>

	<ui:include src="/public/menu.xhtml"></ui:include>

	<p:panel header="#{msgs.lig_mant}" style="margin-bottom:10px;margin-left:10px;margin-top:10px;margin-right:10px;">
		<p:accordionPanel>
			<p:tab title="#{msgs.lig_add}">
				<h:form>
					<table>
						<!-- 			Campo para ingresar el nombre de la liga -->
						<tr>
							<td><h:outputLabel for="nombre" value="#{msgs.lig_name}" /></td>
							<td><p:inputText id="nombre" value="#{LigaMB.nom_liga}">
								</p:inputText> <h:message for="nombre" style="color:red" /></td>
						</tr>
						<!-- 			Campo para ingresar el nombre de la liga -->

						<tr>
							<td><h:outputLabel for="f_ini" value="#{msgs.lig_ini_date}" /></td>
							<td><p:calendar id="f_ini" pattern="dd-MM-yyyy" mode="popup"
									value="#{LigaMB.f_ini}" effect="fold" /></td>
						</tr>

						<tr>
							<td><h:outputLabel for="f_fin" value="#{msgs.lig_fin_date}" /></td>
							<td><p:calendar id="f_fin" pattern="dd-MM-yyyy" mode="popup"
									value="#{LigaMB.f_fin}" effect="fold" /></td>
						</tr>

						<!-- Botones del formulario -->
						<tr>
							<td><p:commandButton id="agregarLiga" value="#{msgs.lig_button_add}"
									action="#{LigaMB.agregarLiga}" ajax="false" /></td>
							<td><p:commandButton id="reset" value="Limpiar campos"
									action="#{LigaMB.reset}" ajax="false" /></td>
						</tr>
						<!-- Botones del formulario -->
					</table>
				</h:form>
			</p:tab>
			<p:tab title="#{msgs.lig_dispon}">
				<h:form id="form">

					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" />

					<p:dataTable id="ligas" var="liga" value="#{LigaMB.listLigas}"
						paginator="true" rows="10" resizableColumns="true"
						draggableColumns="true"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="5,10,15">

						<p:column style="width:3%">
							<f:facet name="header">
								<h:outputText value="#{msgs.col_header_id}" />
							</f:facet>
							<h:outputText value="#{liga.id}" />
						</p:column>

						<p:column filterBy="#{liga.nom_liga}" footerText="contains" filterMatchMode="contains">
							<f:facet name="header">
								<h:outputText value="#{msgs.lig_name}" />
							</f:facet>
							<h:outputText value="#{liga.nom_liga}" />
						</p:column>

						<p:column headerText="#{msgs.lig_ini_date}">
							<h:outputText value="#{liga.f_ini}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="#{msgs.lig_fin_date}" />
							</f:facet>
							<h:outputText value="#{liga.f_fin}" />
						</p:column>

						<p:column style="width:7%">
							<f:facet name="header">
								<h:outputText value="#{msgs.col_header_opc}" />
							</f:facet>

							<h:panelGroup style="white-space: nowrap">
								<p:commandButton icon="ui-icon-pencil" title="#{msgs.lig_edit_lig}"
									oncomplete="PF('dlg_edit').show();"
									update=":edit_form:dlg_edit">
									<f:setPropertyActionListener value="#{liga}"
										target="#{LigaMB.selectedLiga}" />
								</p:commandButton>
								<p:commandButton icon="ui-icon-trash" title="#{msgs.lig_del_lig}"
									action="#{LigaMB.eliminarLiga}" update="ligas">
									<f:setPropertyActionListener value="#{liga}"
										target="#{LigaMB.selectedLiga}" />
								</p:commandButton>
							</h:panelGroup>

						</p:column>

					</p:dataTable>
				</h:form>
			</p:tab>
		</p:accordionPanel>

	</p:panel>

	<h:form id="edit_form">
		<p:dialog header="#{msgs.lig_dlg_title}" id="dlg_edit"
			widgetVar="dlg_edit" modal="true" showEffect="explode"
			hideEffect="bounce" style="height: 'auto';">
			<p:panel style="text-align:center;"
				header="#{LigaMB.selectedLiga.nom_liga}">

				<p:commandButton icon="ui-icon-circle-check"
					action="#{LigaMB.editarLiga}" oncomplete="PF('dlg_edit').hide();" />

				<p:commandButton icon="ui-icon-circle-close"
					oncomplete="PF('dlg_edit').hide();" />
			</p:panel>
		</p:dialog>
	</h:form>
	<ui:include src="/public/footer.xhtml"></ui:include>

</h:body>
</html>